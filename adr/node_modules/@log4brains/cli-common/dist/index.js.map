{"version":3,"file":"index.js","sources":["../src/ConsoleCapturer.ts","../src/AppConsole.ts","../src/FailureExit.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable no-console */\n\nexport type ConsoleLogMethod = typeof console.log;\nexport type ConsoleWarnMethod = typeof console.warn;\nexport type ConsoleErrorMethod = typeof console.error;\nexport type ConsoleMethod =\n  | ConsoleLogMethod\n  | ConsoleWarnMethod\n  | ConsoleErrorMethod;\n\n/**\n * Captures console.log(), console.error() and console.warn()\n * Source: https://github.com/vercel/next.js/blob/canary/packages/next/build/spinner.ts Thanks!\n */\nexport class ConsoleCapturer {\n  private origConsoleLog?: ConsoleLogMethod;\n\n  private origConsoleWarn?: ConsoleWarnMethod;\n\n  private origConsoleError?: ConsoleErrorMethod;\n\n  onLog?: (\n    method: ConsoleMethod,\n    args: any[],\n    stream: \"stdout\" | \"stderr\"\n  ) => void;\n\n  start(): void {\n    this.origConsoleLog = console.log;\n    this.origConsoleWarn = console.warn;\n    this.origConsoleError = console.error;\n\n    const logHandle = (method: ConsoleMethod, args: any[]) => {\n      if (this.onLog) {\n        this.onLog(\n          method,\n          args,\n          method === this.origConsoleLog ? \"stdout\" : \"stderr\"\n        );\n      }\n    };\n\n    console.log = (...args: any) => logHandle(this.origConsoleLog!, args);\n    console.warn = (...args: any) => logHandle(this.origConsoleWarn!, args);\n    console.error = (...args: any) => logHandle(this.origConsoleError!, args);\n  }\n\n  doPrintln(message?: any, ...optionalParams: any[]): void {\n    if (!this.origConsoleLog) {\n      throw new Error(\"ConsoleCapturer is not started\");\n    }\n    this.origConsoleLog(message ?? \"\", ...optionalParams);\n  }\n\n  doPrintlnErr(message?: any, ...optionalParams: any[]): void {\n    if (!this.origConsoleError) {\n      throw new Error(\"ConsoleCapturer is not started\");\n    }\n    this.origConsoleError(message ?? \"\", ...optionalParams);\n  }\n\n  stop(): void {\n    if (\n      !this.origConsoleLog ||\n      !this.origConsoleWarn ||\n      !this.origConsoleError\n    ) {\n      throw new Error(\"ConsoleCapturer is not started\");\n    }\n\n    console.log = this.origConsoleLog;\n    console.warn = this.origConsoleWarn;\n    console.error = this.origConsoleError;\n\n    this.origConsoleLog = undefined;\n    this.origConsoleWarn = undefined;\n    this.origConsoleError = undefined;\n  }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n/* eslint-disable no-console */\n/* eslint-disable class-methods-use-this */\nimport chalk from \"chalk\";\nimport inquirer from \"inquirer\";\nimport ora, { Ora } from \"ora\";\nimport CliTable3, { Table } from \"cli-table3\";\nimport { ConsoleCapturer } from \"./ConsoleCapturer\";\n\nexport type AppConsoleOptions = {\n  debug: boolean;\n  traces: boolean;\n};\n\nexport type ChoiceDefinition<V extends string> = {\n  name: string;\n  value: V;\n  short?: string;\n};\n\nexport class AppConsole {\n  private readonly opts: AppConsoleOptions;\n\n  private spinner?: Ora;\n\n  private spinnerConsoleCapturer = new ConsoleCapturer();\n\n  constructor(opts: Partial<AppConsoleOptions> = {}) {\n    this.opts = {\n      debug: false,\n      traces: false,\n      ...opts\n    };\n  }\n\n  isSpinning(): boolean {\n    return !!this.spinner;\n  }\n\n  startSpinner(message: string): void {\n    if (this.spinner) {\n      throw new Error(\"Spinner already started\");\n    }\n    this.spinner = ora({\n      text: message,\n      spinner: \"bouncingBar\",\n      stream: process.stdout\n    }).start();\n\n    // Add capturing of console.log/warn/error to allow pausing\n    // the spinner before logging and then restarting spinner after\n    this.spinnerConsoleCapturer.onLog = (method, args) => {\n      this.spinner?.stop();\n      method(...args);\n      this.spinner?.start();\n    };\n    this.spinnerConsoleCapturer.start();\n  }\n\n  updateSpinner(message: string): void {\n    if (!this.spinner) {\n      throw new Error(\"Spinner is not started\");\n    }\n    this.spinner.text = message;\n  }\n\n  stopSpinner(withError = false): void {\n    if (!this.spinner) {\n      throw new Error(\"Spinner is not started\");\n    }\n\n    this.spinnerConsoleCapturer.stop();\n\n    this.spinner.stopAndPersist({\n      symbol: chalk.dim(withError ? \"[==  ]\" : \"[====]\"),\n      text: `${this.spinner.text} ${withError ? chalk.red(\"Error\") : \"Done\"}`\n    });\n    this.println();\n    this.spinner = undefined;\n  }\n\n  println(message?: any, ...optionalParams: any[]): void {\n    console.log(message ?? \"\", ...optionalParams);\n  }\n\n  printlnErr(message?: any, ...optionalParams: any[]): void {\n    console.error(message ?? \"\", ...optionalParams);\n  }\n\n  debug(message?: any, ...optionalParams: any[]): void {\n    if (this.opts.debug) {\n      this.println(\n        chalk.dim(message),\n        ...optionalParams.map((p) => chalk.dim(p))\n      );\n    }\n  }\n\n  warn(messageOrErr: string | Error): void {\n    if (messageOrErr instanceof Error) {\n      this.printlnErr(chalk.yellowBright(` ⚠  ${messageOrErr.message}`));\n      if (this.opts.traces && messageOrErr.stack) {\n        this.printlnErr(chalk.yellow(messageOrErr.stack));\n        this.printlnErr();\n      }\n    } else {\n      this.printlnErr(chalk.yellowBright(` ⚠  ${messageOrErr}`));\n    }\n  }\n\n  error(messageOrErr: string | Error): void {\n    if (messageOrErr instanceof Error) {\n      this.printlnErr(chalk.redBright(` ✖  ${messageOrErr.message}`));\n      if (this.opts.traces && messageOrErr.stack) {\n        this.printlnErr(chalk.red(messageOrErr.stack));\n        this.printlnErr();\n      }\n    } else {\n      this.printlnErr(chalk.redBright(` ✖  ${messageOrErr}`));\n    }\n  }\n\n  fatal(messageOrErr: string | Error): void {\n    this.printlnErr();\n    if (messageOrErr instanceof Error) {\n      this.printlnErr(\n        `${chalk.bgRed.bold(\" FATAL \")} ${chalk.redBright(\n          messageOrErr.message\n        )}`\n      );\n      if (this.opts.traces && messageOrErr.stack) {\n        this.printlnErr();\n        this.printlnErr(chalk.red(messageOrErr.stack));\n      }\n    } else {\n      this.printlnErr(\n        `${chalk.bgRed.bold(\" FATAL \")} ${chalk.redBright(messageOrErr)}`\n      );\n    }\n    this.printlnErr();\n  }\n\n  success(message: string): void {\n    this.println(chalk.greenBright(` ✔  ${message}`));\n  }\n\n  createTable(options?: CliTable3.TableConstructorOptions): Table {\n    return new CliTable3({\n      style: {\n        head: [\"blue\"]\n      },\n      ...options\n    });\n  }\n\n  printTable(table: Table, raw = false): void {\n    if (raw) {\n      table.forEach((value) => {\n        if (typeof value === \"object\" && value instanceof Array) {\n          console.log(value.join(\",\"));\n        } else {\n          console.log(value);\n        }\n      });\n    } else {\n      console.log(table.toString());\n    }\n  }\n\n  async askYesNoQuestion(\n    question: string,\n    defaultValue: boolean\n  ): Promise<boolean> {\n    console.log(\"\");\n    const answer = await inquirer.prompt<{ q: boolean }>([\n      { type: \"confirm\", name: \"q\", message: question, default: defaultValue }\n    ]);\n    return answer.q;\n  }\n\n  async askInputQuestion(\n    question: string,\n    defaultValue?: string\n  ): Promise<string> {\n    console.log(\"\");\n    const answer = await inquirer.prompt<{ q: string }>([\n      {\n        type: \"input\",\n        name: \"q\",\n        message: question,\n        default: defaultValue\n      }\n    ]);\n    return answer.q;\n  }\n\n  async askInputQuestionAndValidate(\n    question: string,\n    validationCb: (answer: string) => boolean | string,\n    defaultValue?: string\n  ): Promise<string> {\n    let answer: string;\n    let valid: boolean | string = true;\n    let i = 0;\n    do {\n      if (valid !== true) {\n        console.log(\n          chalk.red(\n            `✗ Please enter a correct value${\n              valid === false ? \"\" : `: ${valid}`\n            }`\n          )\n        );\n      }\n      if (i >= 10) {\n        throw new Error(\"Reached maximum number of retries (10)\");\n      }\n\n      // eslint-disable-next-line no-await-in-loop\n      answer = await this.askInputQuestion(question, defaultValue);\n      valid = validationCb(answer);\n      i += 1;\n    } while (valid !== true);\n    return answer;\n  }\n\n  async askListQuestion<V extends string>(\n    question: string,\n    choices: ChoiceDefinition<V>[],\n    defaultValue?: V\n  ): Promise<V> {\n    console.log(\"\");\n    const answer = await inquirer.prompt<{ q: V }>([\n      {\n        type: \"list\",\n        name: \"q\",\n        message: question,\n        default: defaultValue,\n        choices\n      }\n    ]);\n    return answer.q;\n  }\n}\n","export class FailureExit extends Error {\n  constructor() {\n    super(\"The CLI exited with an error\");\n  }\n}\n"],"names":["ConsoleCapturer","start","origConsoleLog","console","log","origConsoleWarn","warn","origConsoleError","error","logHandle","method","args","onLog","doPrintln","message","optionalParams","Error","doPrintlnErr","stop","undefined","AppConsole","constructor","opts","debug","traces","isSpinning","spinner","startSpinner","ora","text","stream","process","stdout","spinnerConsoleCapturer","updateSpinner","stopSpinner","withError","stopAndPersist","symbol","chalk","dim","red","println","printlnErr","map","p","messageOrErr","yellowBright","stack","yellow","redBright","fatal","bgRed","bold","success","greenBright","createTable","options","CliTable3","style","head","printTable","table","raw","forEach","value","Array","join","toString","askYesNoQuestion","question","defaultValue","answer","inquirer","prompt","type","name","default","q","askInputQuestion","askInputQuestionAndValidate","validationCb","valid","i","askListQuestion","choices","FailureExit"],"mappings":"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"}